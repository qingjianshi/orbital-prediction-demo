(function(){"use strict";var e={97934:function(e,t,a){var o=a(70153),l=a(48547);function n(e,t,a,o,n,i){const r=(0,l.g2)("router-view");return(0,l.uX)(),(0,l.Wv)(r)}var i={name:"App"},r=a(62872);const s=(0,r.A)(i,[["render",n]]);var c=s,u=a(81387),d=a(51675),m=a(72714);const g=e=>((0,l.Qi)("data-v-67c9c352"),e=e(),(0,l.jt)(),e),v={class:"home-container"},p=g((()=>(0,l.Lk)("section",{class:"section title-section"},[(0,l.Lk)("h1",null,"🛰️ WebGIS 三维轨道可视化平台"),(0,l.Lk)("p",{class:"subtitle"},"华东师范大学 · 遥感与GIS硕士 · Vue3 + Cesium 项目实践")],-1))),h={class:"section cards-section"},f=g((()=>(0,l.Lk)("h2",{class:"module-title"},"🔧 模块功能亮点",-1))),w=g((()=>(0,l.Lk)("p",null,"三维轨道渲染、过境路径预测、动态轨迹参数控制与调试、地图图层切换配置。",-1))),y=g((()=>(0,l.Lk)("h2",{class:"module-title"},"🛠️ 技术实现",-1))),b=g((()=>(0,l.Lk)("ul",{class:"tech-list"},[(0,l.Lk)("li",null,"Vue3 + TypeScript 前端模块化开发"),(0,l.Lk)("li",null,"CesiumJS 构建 WebGL 三维地球"),(0,l.Lk)("li",null,"Element Plus 快速 UI 构建"),(0,l.Lk)("li",null,"GitHub Pages 自动部署")],-1))),k=(0,l.Fv)('<section class="section preview-section" data-v-67c9c352><h2 class="module-title" data-v-67c9c352>📸 项目效果图片</h2><div class="screenshot-row" data-v-67c9c352><img src="/assets/demo2.jpg" alt="示意图2" class="screenshot-img" data-v-67c9c352><img src="/assets/demo3.jpg" alt="示意图3" class="screenshot-img" data-v-67c9c352><img src="/assets/demo5.jpg" alt="示意图5" class="screenshot-img" data-v-67c9c352><img src="/assets/demo6.jpg" alt="示意图6" class="screenshot-img" data-v-67c9c352></div><p class="carousel-note" data-v-67c9c352>支持科研演示、教学展示、可集成部署使用</p></section>',1),_={class:"section contact-section"},A=g((()=>(0,l.Lk)("h2",{class:"module-title"},"📄 简历 & 联系方式",-1))),x={class:"contact-content"},L={class:"contact-left"},C={class:"qr-box"},S=g((()=>(0,l.Lk)("p",null,"📱 微信扫码联系我",-1)));var R=(0,l.pM)({__name:"Home",setup(e){return(e,t)=>{const a=(0,l.g2)("el-button"),o=(0,l.g2)("router-link"),n=(0,l.g2)("el-card"),i=(0,l.g2)("el-icon"),r=(0,l.g2)("el-link"),s=(0,l.g2)("el-image");return(0,l.uX)(),(0,l.CE)("div",v,[p,(0,l.Lk)("section",h,[(0,l.bF)(n,{class:"card hover-card"},{default:(0,l.k6)((()=>[f,w,(0,l.bF)(o,{to:"/data-select"},{default:(0,l.k6)((()=>[(0,l.bF)(a,{type:"primary",size:"small"},{default:(0,l.k6)((()=>[(0,l.eW)("进入模块演示")])),_:1})])),_:1})])),_:1}),(0,l.bF)(n,{class:"card hover-card"},{default:(0,l.k6)((()=>[y,b])),_:1})]),k,(0,l.Lk)("section",_,[A,(0,l.Lk)("div",x,[(0,l.Lk)("div",L,[(0,l.bF)(r,{href:"/assets/resume.pdf",target:"_blank",download:"",class:"resume-link"},{default:(0,l.k6)((()=>[(0,l.bF)(i,null,{default:(0,l.k6)((()=>[(0,l.bF)((0,d.R1)(m.Document))])),_:1}),(0,l.eW)(" 下载简历 PDF ")])),_:1}),(0,l.bF)(r,{href:"https://github.com/qingjianshi/orbital-prediction-demo",target:"_blank"},{default:(0,l.k6)((()=>[(0,l.eW)(" 💻 GitHub 项目仓库 ")])),_:1})]),(0,l.Lk)("div",C,[(0,l.bF)(s,{style:{width:"120px","border-radius":"8px"},src:"/assets/wechat_qr.jpg","preview-src-list":["/assets/wechat_qr.jpg"]},null,8,["src","preview-src-list"]),S])])])])}}});const I=(0,r.A)(R,[["__scopeId","data-v-67c9c352"]]);var T=I,D=(a(69421),a(47475)),O=a(95789),F=a(36412),E=a(78202),W=a(13430),z=a(46233),P=a(99465),K=a(71722),M=a(65119),V=a(87506),X=a(48713),j=a(38751),G=a(67465),N=a(11760),J=a(47119),U=a(72515),Q=a(96355),$=a(54560),B=a(94286),H=a(51219),q=a(80047),Y=a(56420),Z=a(98469),ee=a(19466),te=(a(21862),a(82488),a(88448)),ae=a(18421),oe=a(33450),le=a(71710),ne=a(58985),ie=a(71479),re=a(47553),se=a(998),ce=a(92290),ue=a(61051),de=a(58911),me=a(92015),ge=a(14232),ve=a(29353),pe=a(39826),he=a(27935),fe=a(37052);const we=e=>((0,l.Qi)("data-v-2db10c1a"),e=e(),(0,l.jt)(),e),ye={id:"cesiumcontainer",class:"container"},be=we((()=>(0,l.Lk)("div",{class:"title"},[(0,l.Lk)("h1",null,"面向国产卫星的遥感卫星轨道预测及可视化系统平台")],-1))),ke={class:"buttons"},_e={key:0,style:{"margin-top":"5vh"}},Ae=we((()=>(0,l.Lk)("p",{style:{color:"aliceblue","z-index":"1000","font-weight":"bold","text-align":"center","font-size":"18px"}}," 卫星轨道预测与可视化",-1))),xe={style:{display:"flex","flex-direction":"column"}},Le=we((()=>(0,l.Lk)("label",{for:"timeRange",style:{"font-size":"16px","margin-top":"10px","margin-bottom":"10px","background-color":"#283848"}},"开始和结束时间",-1))),Ce={class:"quick-select",style:{"margin-top":"10px","margin-bottom":"10px"}},Se=we((()=>(0,l.Lk)("label",{for:"selectedsatellite",style:{"font-size":"16px","margin-top":"10px","margin-bottom":"10px","background-color":"#283848",width:"100%"}},"卫星选择",-1))),Re={class:"checkbox-container"},Ie={class:"buttons"},Te={key:0,class:"geo_info"},De=we((()=>(0,l.Lk)("div",{class:"title"},[(0,l.Lk)("h1",null,"面向国产卫星的遥感卫星轨道预测及可视化系统平台")],-1))),Oe={class:"buttons"},Fe={key:0,style:{"margin-top":"5vh"}},Ee=we((()=>(0,l.Lk)("p",{style:{color:"aliceblue","z-index":"1000","font-weight":"bold","text-align":"center","font-size":"18px"}}," 卫星过境预测",-1))),We={style:{position:"relative",display:"flex","z-index":"1000","flex-direction":"row",width:"25vw"}},ze={key:0,style:{width:"100%","margin-top":"10px"}},Pe={key:1,style:{display:"flex","margin-top":"10px"}},Ke={style:{display:"flex","flex-direction":"column",position:"relative"}},Me=we((()=>(0,l.Lk)("label",{for:"timeRange2",style:{"font-size":"16px","margin-top":"10px","margin-bottom":"10px","background-color":"#283848"}},"开始和结束时间",-1))),Ve={class:"quick-select",style:{"margin-top":"10px","margin-bottom":"10px"}},Xe={class:"checkbox-container"},je={class:"buttons"},Ge=we((()=>(0,l.Lk)("div",{id:"mouse-position",class:"mouse-position"},null,-1))),Ne=we((()=>(0,l.Lk)("div",{id:"overviewMap",class:"overview-map"},null,-1))),Je="https://api-orbital.3sobs.cn/remotesensing/region_res";var Ue={__name:"data-select",setup(e){const t=(0,d.KR)(null),a=(0,d.Kh)({value:null}),n=new re.A,i=new se.Ay({fill:new ce.A({color:"rgba(255, 255, 255, 0.2)"}),stroke:new ue.A({color:"#ffcc33",width:2})}),r=(0,u.rd)(),s=(0,d.KR)(!1),c=(0,d.KR)([]),g=(0,d.KR)([]),v=(0,d.KR)([]),p=(0,d.KR)([]),h=(0,d.KR)([]),f=(0,d.KR)([]),w=(0,d.KR)([]),y=(0,d.KR)({geometry:null}),b=(0,d.KR)("prediction"),k=(0,d.KR)("drag_box");let _;const A=(0,d.KR)(null),x=(0,d.KR)(null),L=(0,d.KR)(new Date),C=(0,d.KR)(new Date(L.value.getTime()+36e5)),S=(0,d.KR)(null),R=(0,d.KR)(null),I={},T=(0,d.KR)([]),we=(0,d.KR)([]),Ue=(0,d.KR)([]),Qe={},$e={},Be={},He=(0,d.KR)({}),qe=(0,d.KR)([]),Ye=(0,d.Kh)({viewHeight:"",lot:"",lat:""}),Ze=(0,d.KR)([{value:"中国",label:"中国",children:[]}]),et={value:"value",label:"label",children:"children",checkStrictly:!0};async function tt(e,t){try{const a=await B.A.get(`${Je}/${e}`);if(console.log(a.data),1===t)Ze.value[0].children=a.data.data.map((e=>({value:e,label:e,children:[]})));else if(2===t){const t=Ze.value[0].children.find((t=>t.value===e));t&&(t.children=a.data.data.map((e=>({value:e,label:e}))))}}catch(a){console.error("Error fetching options:",a)}}const at=e=>{if(e){const t=e.length;t<=2?(tt(e[e.length-1],t),y.value.geometry=e[e.length-1],console.log(y.value.geometry)):3===t&&(console.log(e[e.length-1]),y.value.geometry=e[e.length-1],console.log(y.value.geometry))}},ot=e=>{b.value=e},lt=()=>{s.value=!s.value},nt=(0,l.EW)((()=>({transition:"width 0.5s",marginTop:"15vh",width:s.value?"0":"25vw",overflow:s.value?"hidden":"visible"}))),it=(0,l.EW)((()=>({marginLeft:s.value?"0":"25vw"}))),rt=e=>{k.value=e,kt()},st=new ie.A({source:new re.A});function ct(){const e=a.value.getInteractions().getArray();e.forEach((e=>{e instanceof ne.Ay&&a.value.removeInteraction(e)})),st.getSource().clear(),y.value.geometry=null,localStorage.removeItem("storedGeometry")}function ut(e){let t;ct(),t="Rectangle"===e?(0,ne.ge)():void 0,_=new ne.Ay({source:st.getSource(),type:"Rectangle"===e?"Circle":"Polygon",geometryFunction:t,style:i}),a.value.addInteraction(_),_.on("drawend",(e=>{const t=e.feature;st.getSource().addFeature(t),a.value.getLayers().getArray().includes(st)||a.value.addLayer(st);const o=t.getGeometry();let l,n;l=o.getCoordinates()[0],n=`POLYGON((${l.map((e=>(0,de.WP)(e).join(" "))).join(",")}))`,y.value.geometry=n,localStorage.setItem("storedGeometry",n),console.log("Finished drawing:",y.value),st.getSource().clear()}))}const dt=async()=>{try{const e=await B.A.get("https://api-orbital.3sobs.cn/remotesensing/orbitlist_res/");console.log(e.data.satellite_list),e.data.satellite_list.sort(((e,t)=>{const a=e=>e.replace(/(\d+)/,(e=>e.padStart(2,"0"))).replace("一","01").replace("二","02").replace("三","03").replace("四","04").replace("五","05").replace("六","06").replace("七","07").replace("八","08").replace("九","09");e=a(e),t=a(t);const[o,l]=e.split("星",2),[n,i]=t.split("星",2);return o===n?!l&&i?-1:!i&&l?1:l.localeCompare(i):o.localeCompare(n)})),h.value=e.data.satellite_list,console.log(h.value)}catch(e){console.error("Error fetching orbits:",e)}},mt=[{text:"未来一小时",value:()=>{const e=new Date,t=new Date;return e.setTime(t.getTime()+36e5),[t,e]}},{text:"未来一天",value:()=>{const e=new Date,t=new Date;return e.setTime(t.getTime()+864e5),[t,e]}},{text:"未来三天",value:()=>{const e=new Date,t=new Date;return e.setTime(t.getTime()+2592e5),[t,e]}}],gt=()=>{const e=new Date,t=new Date;e.setTime(t.getTime()+36e5),c.value=[t,e]},vt=()=>{const e=new Date,t=new Date;e.setTime(t.getTime()+864e5),c.value=[t,e]},pt=()=>{const e=new Date,t=new Date;e.setTime(t.getTime()+2592e5),c.value=[t,e]},ht=()=>{const e=new Date,t=new Date;e.setTime(t.getTime()+864e5),g.value=[t,e]},ft=()=>{const e=new Date,t=new Date;e.setTime(t.getTime()+2592e5),g.value=[t,e]},wt=()=>{const e=new Date,t=new Date;e.setTime(t.getTime()+6048e5),g.value=[t,e]},yt=e=>{const t=new Date(new Date-864e5),a=new Date(t.getTime()+2592e6);return e.getTime()<t.getTime()||e.getTime()>a.getTime()},bt=()=>{c.value=[],v.value=[],f.value=[]},kt=()=>{ct(),localStorage.removeItem("storedGeometry"),localStorage.removeItem("selectedOptions"),qe.value=[],p.value=[],g&&(g.value=[]),w.value=[]},_t=async()=>{if(console.log(c.value),null===c.value||2!==c.value.length)return void H.nk.warning("请选择时间");if(v.value.length<=0)return void H.nk.warning("请选择卫星");const e=new Date(c.value[0]).toISOString(),t=new Date(c.value[1]).toISOString(),a=288e5,o=new Date(new Date(e).getTime()+a).toISOString(),l=new Date(new Date(t).getTime()+a).toISOString(),n={satellite:v.value,time_start:e,time_end:t},i={satellite:v.value,time_start:o,time_end:l};try{const e=await B.A.post("https://api-orbital.3sobs.cn/remotesensing/orbit_res/",n);f.value=e.data,localStorage.setItem("orbitData",JSON.stringify(f.value)),localStorage.setItem("payload2",JSON.stringify(i)),r.push({path:"/orbit_prediction"})}catch(s){console.error("Error posting data:",s)}xt()},At=async()=>{let e,t;if(console.log(y.value.geometry),null===y.value.geometry||y.value.geometry.length<3)H.nk.warning("请选择正确区域");else if(null!==g.value&&2===g.value.length)if(0!==p.value.length){{const a=new Date(g.value[0]).toISOString(),o=new Date(g.value[1]).toISOString(),l=288e5,n=new Date(new Date(a).getTime()+l).toISOString(),i=new Date(new Date(o).getTime()+l).toISOString();t={time_start:n,time_end:i},localStorage.setItem("select_area",JSON.stringify(t)),e="draw_free"===k.value?{geometry:y.value.geometry,time_start:a,time_end:o,satellite:p.value}:{county:y.value.geometry,time_start:a,time_end:o,satellite:p.value}}try{console.log(e);const t=await B.A.post("https://api-orbital.3sobs.cn/remotesensing/transit_res/",e);w.value=t.data,console.log(w.value),localStorage.setItem("orbitData2",JSON.stringify(w.value)),r.push({path:"/orbit_transit"})}catch(a){console.error("Error posting data:",a)}xt()}else H.nk.warning("请选择卫星");else H.nk.warning("请选择时间")},xt=()=>{const e={timeRange:c.value,selectedsatellite:v.value,timeRange2:g.value,selectedsatellite2:p.value,activeTab:b.value,box_data_select:k.value};localStorage.setItem("userSelections",JSON.stringify(e))},Lt=()=>{const e=localStorage.getItem("userSelections");if(e){const t=JSON.parse(e);b.value=t.activeTab,c.value=t.timeRange,console.log(g.value),v.value=t.selectedsatellite,g.value=t.timeRange2,p.value=t.selectedsatellite2,k.value=t.box_data_select}const t=localStorage.getItem("selectedOptions"),o=localStorage.getItem("storedGeometry");if("draw_free"===k.value&&o){const e=new me.A,t=e.readFeature(o,{dataProjection:"EPSG:4326",featureProjection:a.value.getView().getProjection()});y.value.geometry=o,st.getSource().addFeature(t),a.value.addLayer(st)}"drag_box"===k.value&&t&&(qe.value=JSON.parse(t),qe.value.length>0&&tt(qe.value[0],1),y.value.geometry=qe.value[qe.value.length-1])},Ct=(e,t)=>{e.sort(((e,t)=>new Date(e.time_utc)-new Date(t.time_utc)));const a=[],o=[],l=[],n={property:new O.A,property2:new O.A};return I[t]={property:new O.A,property2:new O.A},e.forEach((e=>{const i=F.A.fromIso8601(e.time_utc),r=e.lon,s=e.lat,c=e.height,u=E.A.fromDegrees(r,s,c);l.push(i),o.push(r,s),a.push(u),n.property.addSample(i,u);const d=E.A.fromDegrees(r,s,0);n.property2.addSample(i,d),I[t]=n,T.value.push(u)})),{properties:n,one_position:a,position_ground1:o,satellitePositions:I,orbit_time:l}};(0,l.wB)([c,v,g,p,b,y],(()=>{xt()})),(0,l.wB)(qe,(e=>{localStorage.setItem("selectedOptions",JSON.stringify(e))}),{deep:!0});const St=async()=>{const e={satellite:["高分一号03星","高分一号"],time_start:L.value.toISOString(),time_end:C.value.toISOString()};console.log(e);try{const t=await B.A.post("https://api-orbital.3sobs.cn/remotesensing/orbit_res/",e);x.value=t.data,console.log(x.value);for(const e in x.value){console.log("111111");const t=x.value[e];console.log(t);const{properties:a,one_position:o}=Ct(t["orbit"],e);we.value=a.property,Ue.value=a.property2;const l=t["orbit"][0].time_utc,n=t["orbit"][t["orbit"].length-1].time_utc,i=F.A.fromIso8601(l),r=F.A.fromIso8601(n);A.value.clock.startTime=i.clone(),A.value.clock.stopTime=r.clone(),A.value.clock.currentTime=i.clone(),A.value.clock.clockRange=W.A.LOOP_STOP,A.value.clock.multiplier=1,A.value.timeline.zoomTo(i,r),S.value=new z.A([new P.A({start:i,stop:r})]),R.value=new K.A(we.value),Qe[t["info"].chinese_name]=A.value.entities.add({show:!0,name:t["info"].chinese_name,polyline:{positions:o,width:2,material:new M.A(V.A.fromCssColorString(t["info"].color))}});const s="satellite.gltf";$e[t["info"].chinese_name]=A.value.entities.add({show:!0,name:t["info"].chinese_name,position:we.value,orientation:new K.A(we.value),model:{uri:s,minimumPixelSize:100,maximumScale:500,color:V.A.GREY}}),He.value[t["info"].chinese_name]=$e[e],Be[t["info"].chinese_name]=A.value.entities.add({show:!0,name:t["info"].chinese_name,position:we.value,label:{text:t["info"].chinese_name,showBackground:!1,fillColor:V.A.white,font:"30px sans-serif",pixelOffset:new X.A(-10,-30)}})}}catch(t){console.error("Error posting data:",t)}};return(0,l.sV)((()=>{St(),console.log(x.value),j.A.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI4MjkyOGY5YS1hYmQ0LTQzZTMtODBmMS0zM2IyNjhmNzgyY2IiLCJpZCI6MTU4ODQ3LCJpYXQiOjE2OTEzNzg5NDV9.xWR1MrInwMmJE0O7LJcPcMkCU37FzTLrvPX5M3CMAaI",A.value=new G.A("cesiumcontainer",{shouldAnimate:!0}),A.value.imageryLayers.addImageryProvider(new N.A({url:"https://t0.tianditu.gov.cn/img_w/wmts?tk=9df1e2d38f43b8983357c36603d366e5",layer:"img",style:"default",tileMatrixSetID:"w",format:"tiles",maximumLevel:18})),A.value.imageryLayers.addImageryProvider(new N.A({url:"https://t0.tianditu.gov.cn/cia_w/wmts?tk=9df1e2d38f43b8983357c36603d366e5",layer:"cia",style:"default",tileMatrixSetID:"w",format:"tiles",maximumLevel:18})),A.value._cesiumWidget._creditContainer.style.display="none";const e={};e.defaultResetView=A.value.camera.flyHome(0),e.enableCompass=!0,e.enableZoomControls=!0,e.enableDistanceLegend=!0,e.enableCompassOuterRing=!0,e.resetTooltip="重置视图",e.zoomInTooltip="放大",e.zoomOutTooltip="缩小",new $.A(A.value,e);let o=new J.A(A.value.scene.canvas);o.setInputAction((function(e){let t=new X.A(e.endPosition.x,e.endPosition.y);if(t){let e=A.value.scene.globe.pick(A.value.camera.getPickRay(t),A.value.scene);if(e){let t=A.value.scene.globe.ellipsoid.cartesianToCartographic(e);if(t){let a=Math.sqrt(A.value.scene.camera.positionWC.x*A.value.scene.camera.positionWC.x+A.value.scene.camera.positionWC.y*A.value.scene.camera.positionWC.y+A.value.scene.camera.positionWC.z*A.value.scene.camera.positionWC.z),o=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z),l=[U.A.toDegrees(t.longitude),U.A.toDegrees(t.latitude)];Ye.viewHeight=(a-o).toFixed(1),Ye.lot=l[0].toFixed(6),Ye.lat=l[1].toFixed(6)}}}}),Q.A.MOUSE_MOVE),A.value.scene.debugShowFramesPerSecond=!0;const l=document.querySelector(".distance-legend");l&&(l.style.display="block",l.style.zIndex="1000",l.style.bottom="15vh");const r=new ge.A({layers:[new oe.A({source:new le.A({url:"https://t0.tianditu.gov.cn/DataServer?x={x}&y={y}&l={z}&T=vec_w&tk=9df1e2d38f43b8983357c36603d366e5",tileLoadFunction:function(e,t){let a=new Image;a.crossOrigin="",a.setAttribute("crossOrigin","anonymous"),a.onload=function(){let t=document.createElement("canvas"),o=a.width,l=a.height;t.width=o,t.height=l;let n=t.getContext("2d");n.filter="grayscale(98%) invert(100%) sepia(20%) hue-rotate(180deg) saturate(1600%) brightness(80%) contrast(90%)",n.drawImage(a,0,0,o,l,0,0,o,l),e.getImage().src=t.toDataURL("image/png")},a.src=t}})}),new oe.A({source:new le.A({url:"https://t0.tianditu.gov.cn/DataServer?x={x}&y={y}&l={z}&T=cva_w&tk=9df1e2d38f43b8983357c36603d366e5",tileLoadFunction:function(e,t){let a=new Image;a.crossOrigin="",a.setAttribute("crossOrigin","anonymous"),a.onload=function(){let t=document.createElement("canvas"),o=a.width,l=a.height;t.width=o,t.height=l;let n=t.getContext("2d");n.filter="grayscale(98%) invert(100%) sepia(20%) hue-rotate(180deg) saturate(1600%) brightness(80%) contrast(90%)",n.drawImage(a,0,0,o,l,0,0,o,l),e.getImage().src=t.toDataURL("image/png")},a.src=t}})})],collapseLabel:"»",label:"«",collapsed:!1,collapsible:!1,target:"overviewMap"});a.value=new te.A({target:t.value,layers:[new oe.A({source:new le.A({url:"https://t0.tianditu.gov.cn/DataServer?x={x}&y={y}&l={z}&T=vec_w&tk=9df1e2d38f43b8983357c36603d366e5",tileLoadFunction:function(e,t){let a=new Image;a.crossOrigin="",a.setAttribute("crossOrigin","anonymous"),a.onload=function(){let t=document.createElement("canvas"),o=a.width,l=a.height;t.width=o,t.height=l;let n=t.getContext("2d");n.filter="grayscale(98%) invert(100%) sepia(20%) hue-rotate(180deg) saturate(1600%) brightness(80%) contrast(90%)",n.drawImage(a,0,0,o,l,0,0,o,l),e.getImage().src=t.toDataURL("image/png")},a.src=t}})}),new oe.A({source:new le.A({url:"https://t0.tianditu.gov.cn/DataServer?x={x}&y={y}&l={z}&T=cva_w&tk=9df1e2d38f43b8983357c36603d366e5",tileLoadFunction:function(e,t){let a=new Image;a.crossOrigin="",a.setAttribute("crossOrigin","anonymous"),a.onload=function(){let t=document.createElement("canvas"),o=a.width,l=a.height;t.width=o,t.height=l;let n=t.getContext("2d");n.filter="grayscale(98%) invert(100%) sepia(20%) hue-rotate(180deg) saturate(1600%) brightness(80%) contrast(90%)",n.drawImage(a,0,0,o,l,0,0,o,l),e.getImage().src=t.toDataURL("image/png")},a.src=t}})}),new ie.A({source:n,style:i})],view:new ae.Ay({center:[12923468.57,4865948.2],zoom:3,projection:"EPSG:3857"}),controls:(0,ve.N)().extend([new pe.A,new he.A,r,new fe.A])});const s=document.getElementById("mouse-position");a.value.on("pointermove",(function(e){e.preventDefault();const t=a.value.getEventCoordinate(e.originalEvent),o=(0,de.WP)(t),l=o.map((function(e){return e.toFixed(6)})).join(", ");s.innerText=`Lon: ${l.split(", ")[0]}, Lat: ${l.split(", ")[1]}`})),dt(),Lt()})),(e,a)=>{const n=(0,l.g2)("el-icon"),i=(0,l.g2)("el-tooltip");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bo)((0,l.Lk)("div",ye,[be,(0,l.Lk)("div",{class:"select_box",style:(0,D.Tr)(nt.value)},[(0,l.Lk)("div",ke,[(0,l.bF)((0,d.R1)(q.S2),{onClick:a[0]||(a[0]=e=>ot("prediction")),style:(0,D.Tr)({width:"50%","background-color":"prediction"===b.value?"#283848":"#2c3e50"})},{default:(0,l.k6)((()=>[(0,l.eW)("轨道模拟")])),_:1},8,["style"]),(0,l.bF)((0,d.R1)(q.S2),{onClick:a[1]||(a[1]=e=>ot("transit")),style:(0,D.Tr)({width:"50%","background-color":"transit"===b.value?"#283848":"#2c3e50"})},{default:(0,l.k6)((()=>[(0,l.eW)("过境预测")])),_:1},8,["style"])]),"prediction"===b.value?((0,l.uX)(),(0,l.CE)("div",_e,[Ae,(0,l.Lk)("div",xe,[Le,(0,l.Lk)("div",Ce,[(0,l.bF)((0,d.R1)(q.S2),{onClick:gt},{default:(0,l.k6)((()=>[(0,l.eW)("未来一小时")])),_:1}),(0,l.bF)((0,d.R1)(q.S2),{onClick:vt},{default:(0,l.k6)((()=>[(0,l.eW)("未来一天")])),_:1}),(0,l.bF)((0,d.R1)(q.S2),{onClick:pt},{default:(0,l.k6)((()=>[(0,l.eW)("未来三天")])),_:1})]),(0,l.bF)((0,d.R1)(Y.MG),{modelValue:c.value,"onUpdate:modelValue":a[2]||(a[2]=e=>c.value=e),type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",shortcuts:mt,style:{width:"23vw"}},null,8,["modelValue"]),Se]),(0,l.Lk)("div",Re,[(0,l.bF)((0,d.R1)(Z.o5),{modelValue:v.value,"onUpdate:modelValue":a[3]||(a[3]=e=>v.value=e)},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(h.value,(e=>((0,l.uX)(),(0,l.Wv)((0,d.R1)(Z.dI),{label:e,key:e,class:"el-checkbox-button"},{default:(0,l.k6)((()=>[(0,l.eW)((0,D.v_)(e),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])]),(0,l.Lk)("div",Ie,[(0,l.bF)((0,d.R1)(q.S2),{onClick:bt,style:{width:"50%"}},{default:(0,l.k6)((()=>[(0,l.eW)("重置")])),_:1}),(0,l.bF)((0,d.R1)(q.S2),{onClick:_t,style:{width:"50%"}},{default:(0,l.k6)((()=>[(0,l.eW)("确认")])),_:1})])])):(0,l.Q3)("",!0)],4),Ye.viewHeight&&Ye.lot&&Ye.lat?((0,l.uX)(),(0,l.CE)("div",Te,[(0,l.Lk)("p",null,"视高: "+(0,D.v_)(Ye.viewHeight)+"m",1),(0,l.Lk)("p",null,"经度: "+(0,D.v_)(Ye.lot)+"°",1),(0,l.Lk)("p",null,"纬度: "+(0,D.v_)(Ye.lat)+"°",1)])):(0,l.Q3)("",!0),(0,l.Lk)("div",{class:"collapse-arrow",onClick:lt,style:(0,D.Tr)(it.value)},[(0,l.bF)(n,{size:"30px"},{default:(0,l.k6)((()=>[s.value?((0,l.uX)(),(0,l.Wv)((0,d.R1)(m.ArrowRight),{key:0})):((0,l.uX)(),(0,l.Wv)((0,d.R1)(m.ArrowLeft),{key:1}))])),_:1})],4)],512),[[o.aG,"prediction"===b.value]]),(0,l.bo)((0,l.Lk)("div",{ref_key:"mapContainer",ref:t,class:"map-container"},[De,(0,l.Lk)("div",{class:"select_box",style:(0,D.Tr)(nt.value)},[(0,l.Lk)("div",Oe,[(0,l.bF)((0,d.R1)(q.S2),{onClick:a[4]||(a[4]=e=>ot("prediction")),style:(0,D.Tr)({width:"50%","background-color":"prediction"===b.value?"#283848":"#2c3e50"})},{default:(0,l.k6)((()=>[(0,l.eW)("轨道模拟")])),_:1},8,["style"]),(0,l.bF)((0,d.R1)(q.S2),{onClick:a[5]||(a[5]=e=>ot("transit")),style:(0,D.Tr)({width:"50%","background-color":"transit"===b.value?"#283848":"#2c3e50"})},{default:(0,l.k6)((()=>[(0,l.eW)("过境预测")])),_:1},8,["style"])]),"transit"===b.value?((0,l.uX)(),(0,l.CE)("div",Fe,[Ee,(0,l.Lk)("div",We,[(0,l.bF)((0,d.R1)(q.S2),{onClick:a[6]||(a[6]=e=>rt("drag_box")),style:(0,D.Tr)({width:"50%","background-color":"drag_box"===k.value?"#283848":"#2c3e50"})},{default:(0,l.k6)((()=>[(0,l.eW)("行政区选择")])),_:1},8,["style"]),(0,l.bF)((0,d.R1)(q.S2),{onClick:a[7]||(a[7]=e=>rt("draw_free")),style:(0,D.Tr)({width:"50%","background-color":"draw_free"===k.value?"#283848":"#2c3e50"})},{default:(0,l.k6)((()=>[(0,l.eW)("自由绘制")])),_:1},8,["style"])]),"drag_box"===k.value?((0,l.uX)(),(0,l.CE)("div",ze,[(0,l.bF)((0,d.R1)(ee._m),{modelValue:qe.value,"onUpdate:modelValue":a[8]||(a[8]=e=>qe.value=e),options:Ze.value,onChange:at,placeholder:"请选择地区",props:et,clearable:"",style:{width:"100%"}},null,8,["modelValue","options"])])):(0,l.Q3)("",!0),"draw_free"===k.value?((0,l.uX)(),(0,l.CE)("div",Pe,[(0,l.bF)(i,{class:"item",effect:"dark",content:"绘制一个多边形,点击左键开始,绘制三个以上点后,点击右键结束",placement:"top"},{default:(0,l.k6)((()=>[(0,l.bF)((0,d.R1)(q.S2),{onClick:a[9]||(a[9]=e=>ut("Polygon")),style:{width:"33%"}},{default:(0,l.k6)((()=>[(0,l.eW)("绘制面")])),_:1})])),_:1}),(0,l.bF)(i,{class:"item",effect:"dark",content:"绘制一个矩形,点击左键开始,拖动到指定位置,点击左键结束",placement:"top"},{default:(0,l.k6)((()=>[(0,l.bF)((0,d.R1)(q.S2),{onClick:a[10]||(a[10]=e=>ut("Rectangle")),style:{width:"33%"}},{default:(0,l.k6)((()=>[(0,l.eW)("绘制矩形")])),_:1})])),_:1}),(0,l.bF)((0,d.R1)(q.S2),{onClick:ct,style:{width:"33%"}},{default:(0,l.k6)((()=>[(0,l.eW)("清空选择")])),_:1})])):(0,l.Q3)("",!0),(0,l.Lk)("div",Ke,[Me,(0,l.Lk)("div",Ve,[(0,l.bF)((0,d.R1)(q.S2),{onClick:ht},{default:(0,l.k6)((()=>[(0,l.eW)("未来一天")])),_:1}),(0,l.bF)((0,d.R1)(q.S2),{onClick:ft},{default:(0,l.k6)((()=>[(0,l.eW)("未来三天")])),_:1}),(0,l.bF)((0,d.R1)(q.S2),{onClick:wt},{default:(0,l.k6)((()=>[(0,l.eW)("未来一周")])),_:1})]),(0,l.bF)((0,d.R1)(Y.MG),{modelValue:g.value,"onUpdate:modelValue":a[11]||(a[11]=e=>g.value=e),type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",style:{width:"23vw"},"disabled-date":yt},null,8,["modelValue"])]),(0,l.Lk)("div",Xe,[(0,l.bF)((0,d.R1)(Z.o5),{modelValue:p.value,"onUpdate:modelValue":a[12]||(a[12]=e=>p.value=e)},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(h.value,(e=>((0,l.uX)(),(0,l.Wv)((0,d.R1)(Z.dI),{label:e,key:e,class:"el-checkbox-button"},{default:(0,l.k6)((()=>[(0,l.eW)((0,D.v_)(e),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])]),(0,l.Lk)("div",je,[(0,l.bF)((0,d.R1)(q.S2),{onClick:kt,style:{width:"50%"}},{default:(0,l.k6)((()=>[(0,l.eW)("重置")])),_:1}),(0,l.bF)((0,d.R1)(q.S2),{onClick:At,style:{width:"50%"}},{default:(0,l.k6)((()=>[(0,l.eW)("确认")])),_:1})])])):(0,l.Q3)("",!0)],4),Ge,Ne,(0,l.Lk)("div",{class:"collapse-arrow",onClick:lt,style:(0,D.Tr)(it.value)},[(0,l.bF)(n,{size:"30px"},{default:(0,l.k6)((()=>[s.value?((0,l.uX)(),(0,l.Wv)((0,d.R1)(m.ArrowRight),{key:0})):((0,l.uX)(),(0,l.Wv)((0,d.R1)(m.ArrowLeft),{key:1}))])),_:1})],4)],512),[[o.aG,"transit"===b.value]])],64)}}};const Qe=(0,r.A)(Ue,[["__scopeId","data-v-2db10c1a"]]);var $e=Qe,Be=a(96008),He=a(96694),qe=a(17511),Ye=a(97676),Ze=a(39724),et=a(46290),tt=a(94236),at=a(4851),ot=a(47556);const lt=e=>((0,l.Qi)("data-v-5e14fbd2"),e=e(),(0,l.jt)(),e),nt={id:"cesiumcontainer",class:"container"},it=lt((()=>(0,l.Lk)("div",{class:"title"},[(0,l.Lk)("h1",null,"卫星轨道预测可视化")],-1))),rt={style:{"background-color":"#283848","margin-left":"1vw","font-size":"14px"}},st={style:{"background-color":"#283848","margin-left":"1vw","font-size":"14px"}},ct={class:"satellite-list",style:{"max-height":"15vh",overflow:"hidden","overflow-y":"auto"}},ut={class:"radio-group",style:{"font-size":"16px","background-color":"#283848"}},dt={class:"checkbox-row"},mt={class:"checkbox-row"},gt=lt((()=>(0,l.Lk)("p",{style:{"background-color":"#283848","margin-left":"1vw","font-size":"16px"}},"播放速率",-1))),vt=lt((()=>(0,l.Lk)("p",{style:{"background-color":"#283848","margin-left":"1vw","font-size":"16px"}},"观测视角",-1))),pt={style:{"margin-top":"2vh"}},ht={key:2,class:"geo_info"},ft={id:"eyecontainer",class:"container2"};var wt={__name:"orbit_prediction",setup(e){const t=(0,d.KR)(null),a=(0,d.KR)(!1),n=(0,d.KR)(null),i=(0,d.KR)(null),r=(0,d.KR)(null),s={},c=(0,d.KR)(1),g=(0,d.KR)([]),v=(0,d.KR)([]),p=(0,d.KR)([]),h={},f={},w={},y={},b={},k=(0,d.KR)({}),_={},A=(0,u.rd)();let x,L;const C={},S=(0,d.Kh)({viewHeight:"",lot:"",lat:""}),R=(0,d.KR)(null),I=(0,d.KR)(null),T=(0,d.Kh)({}),B=(0,d.KR)([]),H=(0,d.KR)([]),Y=(0,d.KR)(!1),te=()=>{Y.value=!Y.value},ae=(e,t)=>{h[e]&&(h[e].show=t)},oe=(e,t)=>{b[e]&&(b[e].show=t)},le=(e,t)=>{f[e]&&(f[e].show=t)},ne=(e,t)=>{y[e]&&(y[e].show=t)},ie=(e,t)=>{_[e]&&(_[e].show=t)},re=(e,t)=>{w[e]&&(w[e].show=t)},se=e=>{c.value=e,x.clock.multiplier=e},ce=()=>{R.value=null,x.camera.flyHome(1)},ue=()=>{A.push({path:"/"})},de=(0,l.EW)((()=>({transition:"width 0.5s",width:Y.value?"0":"25vw",overflow:Y.value?"hidden":"visible"}))),me=(0,l.EW)((()=>({marginLeft:Y.value?"0":"26vw"}))),ge=e=>{const t=e;if(!t||0===t.length)return R.value=null,void x.camera.flyHome(1);const a=f[t[0]];if(!a)return;const o=x.clock.currentTime,l=a.position.getValue(o);if(!l)return;let n;switch(t[1]){case"top":n=new Be.A(0,-U.A.PI_OVER_TWO,15e3);break;case"side":n=new Be.A(.5,-.5,15e3);break;case"follow":return void(x.trackedEntity=a)}x.camera.lookAtTransform(He.A.IDENTITY),x.camera.lookAt(l,n)},ve=e=>{if(!e||0===e.length)return a.value=!1,void(I.value=null);a.value=!0;const t=f[e[0]];if(!t)return;L.trackedEntity=t;const o=()=>{const e=x.clock.currentTime,a=t.position.getValue(e);if(a){const e=new Be.A(0,-U.A.PI_OVER_TWO,15e3);L.camera.lookAtTransform(He.A.IDENTITY),L.camera.lookAt(a,e)}};x.clock.onTick.addEventListener(o),L._updateCameraViewCallback=o};return(0,l.sV)((()=>{j.A.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI4MjkyOGY5YS1hYmQ0LTQzZTMtODBmMS0zM2IyNjhmNzgyY2IiLCJpZCI6MTU4ODQ3LCJpYXQiOjE2OTEzNzg5NDV9.xWR1MrInwMmJE0O7LJcPcMkCU37FzTLrvPX5M3CMAaI",x=new G.A("cesiumcontainer",{shouldAnimate:!0}),L=new G.A("eyecontainer",{geocoder:!1,homeButton:!1,sceneModePicker:!1,baseLayerPicker:!1,navigationHelpButton:!1,animation:!1,timeline:!1,fullscreenButton:!1}),x.imageryLayers.addImageryProvider(new N.A({url:"https://t0.tianditu.gov.cn/img_w/wmts?tk=9df1e2d38f43b8983357c36603d366e5",layer:"img",style:"default",tileMatrixSetID:"w",format:"tiles",maximumLevel:18})),x.imageryLayers.addImageryProvider(new N.A({url:"https://t0.tianditu.gov.cn/cia_w/wmts?tk=9df1e2d38f43b8983357c36603d366e5",layer:"cia",style:"default",tileMatrixSetID:"w",format:"tiles",maximumLevel:18})),x._cesiumWidget._creditContainer.style.display="none",L.imageryLayers.addImageryProvider(new N.A({url:"https://t0.tianditu.gov.cn/img_w/wmts?tk=9df1e2d38f43b8983357c36603d366e5",layer:"img",style:"default",tileMatrixSetID:"w",format:"tiles",maximumLevel:18})),L.imageryLayers.addImageryProvider(new N.A({url:"https://t0.tianditu.gov.cn/cia_w/wmts?tk=9df1e2d38f43b8983357c36603d366e5",layer:"cia",style:"default",tileMatrixSetID:"w",format:"tiles",maximumLevel:18})),L._cesiumWidget._creditContainer.style.display="none";const e={};e.defaultResetView=x.camera.flyHome(0),e.enableCompass=!0,e.enableZoomControls=!0,e.enableDistanceLegend=!0,e.enableCompassOuterRing=!0,e.resetTooltip="重置视图",e.zoomInTooltip="放大",e.zoomOutTooltip="缩小",new $.A(x,e);let a=new J.A(x.scene.canvas);a.setInputAction((function(e){let t=new X.A(e.endPosition.x,e.endPosition.y);if(t){let e=x.scene.globe.pick(x.camera.getPickRay(t),x.scene);if(e){let t=x.scene.globe.ellipsoid.cartesianToCartographic(e);if(t){let a=Math.sqrt(x.scene.camera.positionWC.x*x.scene.camera.positionWC.x+x.scene.camera.positionWC.y*x.scene.camera.positionWC.y+x.scene.camera.positionWC.z*x.scene.camera.positionWC.z),o=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z),l=[U.A.toDegrees(t.longitude),U.A.toDegrees(t.latitude)];S.viewHeight=(a-o).toFixed(1),S.lot=l[0].toFixed(6),S.lat=l[1].toFixed(6)}}}}),Q.A.MOUSE_MOVE),x.scene.debugShowFramesPerSecond=!0;const o=document.querySelector(".distance-legend");o&&(o.style.display="block",o.style.zIndex="1000",o.style.bottom="15vh");const l=localStorage.getItem("orbitData"),c=localStorage.getItem("payload2");l&&c&&(t.value=JSON.parse(l),n.value=JSON.parse(c),n.value.satellite.forEach(((e,t)=>{T[e]=[`orbit-line-${t}`,`model-${t}`,`tag-${t}`]})),B.value=n.value.satellite.map((e=>({value:e,label:e,children:[{value:"top",label:"俯视"},{value:"side",label:"侧视"},{value:"follow",label:"跟随"}]}))),H.value=n.value.satellite.map((e=>({value:e,label:e,children:[{value:"eyes",label:"鹰眼图"}]}))));const u=(e,t)=>{e.sort(((e,t)=>new Date(e.time_utc)-new Date(t.time_utc)));const a=[],o=[],l=[],n={property:new O.A,property2:new O.A};return s[t]={property:new O.A,property2:new O.A},e.forEach((e=>{const i=F.A.fromIso8601(e.time_utc),r=e.lon,c=e.lat,u=e.height,d=E.A.fromDegrees(r,c,u);l.push(i),o.push(r,c),a.push(d),n.property.addSample(i,d);const m=E.A.fromDegrees(r,c,0);n.property2.addSample(i,m),s[t]=n,g.value.push(d)})),{properties:n,one_position:a,position_ground1:o,satellitePositions:s,orbit_time:l}};for(const d in t.value){const m=t.value[d],{properties:A,one_position:R,position_ground1:I,satellitePositions:D,orbit_time:q}=u(m["orbit"],d);v.value=A.property,p.value=A.property2;const Y=document.createElement("div");Y.setAttribute("id","infoDialog"),Y.style.display="none",Y.style.position="absolute",Y.style.top="10px",Y.style.left="10px",Y.style.backgroundColor="white",Y.style.padding="10px",Y.style.border="1px solid #ccc",x.container.appendChild(Y),C[d]=Y;const Z=m["orbit"][0].time_utc,ee=m["orbit"][m["orbit"].length-1].time_utc,te=F.A.fromIso8601(Z),ae=F.A.fromIso8601(ee);x.clock.startTime=te.clone(),x.clock.stopTime=ae.clone(),x.clock.currentTime=te.clone(),x.clock.clockRange=W.A.LOOP_STOP,x.clock.multiplier=1,x.timeline.zoomTo(te,ae),i.value=new z.A([new P.A({start:te,stop:ae})]),r.value=new K.A(v.value),h[m["info"].chinese_name]=x.entities.add({show:!0,name:m["info"].chinese_name,polyline:{positions:R,width:2,material:new M.A(V.A.fromCssColorString(m["info"].color))}});const oe="satellite.gltf";f[m["info"].chinese_name]=x.entities.add({show:!0,name:m["info"].chinese_name,position:v.value,orientation:new K.A(v.value),model:{uri:oe,minimumPixelSize:100,maximumScale:500,color:V.A.GREY}}),k.value[m["info"].chinese_name]=f[d],w[m["info"].chinese_name]=x.entities.add({show:!0,name:m["info"].chinese_name,position:v.value,label:{text:m["info"].chinese_name,showBackground:!1,fillColor:V.A.white,font:"30px sans-serif",pixelOffset:new X.A(-10,-30)}}),b[m["info"].chinese_name]=x.entities.add({show:!1,name:m["info"].chinese_name,position:p.value,orientation:r.value,plane:{plane:new qe.A(E.A.UNIT_Z,0),dimensions:new X.A(5e4,m["info"].width),fill:!1,outline:!0,outlineColor:V.A.RED}}),y[m["info"].chinese_name]=x.entities.add({show:!1,corridor:{positions:E.A.fromDegreesArray(I),material:new M.A(V.A.fromCssColorString(m["info"].color).withAlpha(.4)),width:m["info"].width,clampToGround:!0,classificationType:Ye.A.TERRAIN,cornerType:Ze.A.BEVELED,height:1}});const le=[];let ne=null;function ie(){const e=x.clock.currentTime;D[d].property.setInterpolationOptions({interpolationDegree:5,interpolationAlgorithm:et.A}),D[d].property2.setInterpolationOptions({interpolationDegree:5,interpolationAlgorithm:et.A});const t=D[d].property.getValue(e),a=(D[d].property2.getValue(e),U.A.toDegrees(tt.A.fromCartesian(t).longitude)),o=U.A.toDegrees(tt.A.fromCartesian(t).latitude),l=tt.A.fromCartesian(t).height;if(C[d].innerHTML=`\n            <div style="color:black;">\n              <p>经度: ${a.toFixed(6)}</p>\n              <p>纬度: ${o.toFixed(6)}</p>\n              <p>高度: ${(l/1e3).toFixed(3)}千米</p>\n              <p>卫星信息：${m["info"].info}</p>\n            </div>\n            `,f[m["info"].chinese_name].description=new at.A(Y.innerHTML),!F.A.equals(ne,e)){ne=e;let t=1;for(let a=1;a<q.length;a++)if(F.A.secondsDifference(e,q[a-1])>0&&F.A.secondsDifference(e,q[a])<0){t=a;break}if(F.A.secondsDifference(e,ae)<F.A.secondsDifference(te,ae)/2e3){if(void 0!==a&&void 0!==o)return le.length<=2?(le.length=0,le.push(I[0]),le.push(I[1]),le.push(I[2]),le.push(I[3])):F.A.secondsDifference(e,q[t-1])>0&&F.A.secondsDifference(e,q[t])<0&&le.length>=2+2*t?(le[le.length-2]=a,le[le.length-1]=o):le.push(a,o),E.A.fromDegreesArray(le)}else le.length=0}}x.clock.onTick.addEventListener(ie),_[m["info"].chinese_name]=x.entities.add({show:!1,corridor:{positions:new ot.A(ie,!1),width:m["info"].width,cornerType:Ze.A.BEVELED,clampToGround:!0,classificationType:Ye.A.TERRAIN,height:1,material:new M.A(V.A.fromCssColorString(m["info"].color).withAlpha(.75))}})}})),(0,l.xo)((()=>{x&&(x.destroy(),x=null),L&&(L.destroy(),L=null)})),(e,i)=>{const r=(0,l.g2)("el-icon");return(0,l.uX)(),(0,l.CE)("div",nt,[it,t.value&&n.value?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"opera_box",style:(0,D.Tr)(de.value)},[(0,l.Lk)("div",null,[(0,l.Lk)("p",rt,"开始时间: "+(0,D.v_)(n.value.time_start.substring(0,19)),1),(0,l.Lk)("p",st,"结束时间: "+(0,D.v_)(n.value.time_end.substring(0,19)),1)]),(0,l.Lk)("div",ct,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.value.satellite,((e,t)=>((0,l.uX)(),(0,l.CE)("div",{key:e,class:"satellite-item"},[(0,l.Lk)("div",ut,[(0,l.eW)((0,D.v_)(e)+" ",1),(0,l.bF)((0,d.R1)(Z.o5),{modelValue:T[e],"onUpdate:modelValue":t=>T[e]=t},{default:(0,l.k6)((()=>[(0,l.Lk)("div",dt,[(0,l.bF)((0,d.R1)(Z.dI),{label:`orbit-line-${t}`,onChange:t=>ae(e,t)},{default:(0,l.k6)((()=>[(0,l.eW)("轨道线")])),_:2},1032,["label","onChange"]),(0,l.bF)((0,d.R1)(Z.dI),{label:`real-time-box-${t}`,onChange:t=>oe(e,t)},{default:(0,l.k6)((()=>[(0,l.eW)("幅宽")])),_:2},1032,["label","onChange"]),(0,l.bF)((0,d.R1)(Z.dI),{label:`model-${t}`,onChange:t=>le(e,t)},{default:(0,l.k6)((()=>[(0,l.eW)("模型")])),_:2},1032,["label","onChange"])]),(0,l.Lk)("div",mt,[(0,l.bF)((0,d.R1)(Z.dI),{label:`sub-satellite-area-${t}`,onChange:t=>ne(e,t)},{default:(0,l.k6)((()=>[(0,l.eW)("星下区")])),_:2},1032,["label","onChange"]),(0,l.bF)((0,d.R1)(Z.dI),{label:`real-time-scan-${t}`,onChange:t=>ie(e,t)},{default:(0,l.k6)((()=>[(0,l.eW)("实时扫过区域")])),_:2},1032,["label","onChange"]),(0,l.bF)((0,d.R1)(Z.dI),{label:`tag-${t}`,onChange:t=>re(e,t)},{default:(0,l.k6)((()=>[(0,l.eW)("标签")])),_:2},1032,["label","onChange"])])])),_:2},1032,["modelValue","onUpdate:modelValue"])])])))),128))])],4)):(0,l.Q3)("",!0),t.value&&n.value?((0,l.uX)(),(0,l.CE)("div",{key:1,class:"custom_box",style:(0,D.Tr)(de.value)},[gt,(0,l.bF)((0,d.R1)(q.S2),{onClick:i[0]||(i[0]=e=>se(1)),style:{"margin-left":"1vw",width:"20%"}},{default:(0,l.k6)((()=>[(0,l.eW)("1X")])),_:1}),(0,l.bF)((0,d.R1)(q.S2),{onClick:i[1]||(i[1]=e=>se(5)),style:{width:"20%"}},{default:(0,l.k6)((()=>[(0,l.eW)("5X")])),_:1}),(0,l.bF)((0,d.R1)(q.S2),{onClick:i[2]||(i[2]=e=>se(30)),style:{width:"20%"}},{default:(0,l.k6)((()=>[(0,l.eW)("30X")])),_:1}),(0,l.bF)((0,d.R1)(q.S2),{onClick:i[3]||(i[3]=e=>se(60)),style:{width:"20%"}},{default:(0,l.k6)((()=>[(0,l.eW)("60X")])),_:1}),vt,(0,l.Lk)("div",null,[B.value.length>0?((0,l.uX)(),(0,l.Wv)((0,d.R1)(ee._m),{key:0,modelValue:R.value,"onUpdate:modelValue":i[4]||(i[4]=e=>R.value=e),options:B.value,props:{expandTrigger:"hover"},onChange:ge,placeholder:"观测视角",clearable:"",style:{"margin-left":"1.5vw",width:"85%"}},null,8,["modelValue","options"])):(0,l.Q3)("",!0)]),(0,l.Lk)("div",null,[H.value.length>0?((0,l.uX)(),(0,l.Wv)((0,d.R1)(ee._m),{key:0,modelValue:I.value,"onUpdate:modelValue":i[5]||(i[5]=e=>I.value=e),options:H.value,props:{expandTrigger:"hover"},onChange:ve,clearable:"",placeholder:"鹰眼图",style:{"margin-top":"2vh","margin-left":"1.5vw",width:"85%"}},null,8,["modelValue","options"])):(0,l.Q3)("",!0)]),(0,l.Lk)("div",pt,[(0,l.bF)((0,d.R1)(q.S2),{onClick:ue,style:{"margin-left":"1.5vw",width:"40%"}},{default:(0,l.k6)((()=>[(0,l.eW)("返回")])),_:1}),(0,l.bF)((0,d.R1)(q.S2),{onClick:ce,style:{"margin-left":"1.5vw",width:"40%"}},{default:(0,l.k6)((()=>[(0,l.eW)("重置视图")])),_:1})])],4)):(0,l.Q3)("",!0),S.viewHeight&&S.lot&&S.lat?((0,l.uX)(),(0,l.CE)("div",ht,[(0,l.Lk)("p",null,"视高: "+(0,D.v_)(S.viewHeight)+"m",1),(0,l.Lk)("p",null,"经度: "+(0,D.v_)(S.lot)+"°",1),(0,l.Lk)("p",null,"纬度: "+(0,D.v_)(S.lat)+"°",1)])):(0,l.Q3)("",!0),(0,l.bo)((0,l.Lk)("div",ft,null,512),[[o.aG,a.value]]),(0,l.Lk)("div",{class:"collapse-arrow",onClick:te,style:(0,D.Tr)(me.value)},[(0,l.bF)(r,{size:"30px"},{default:(0,l.k6)((()=>[Y.value?((0,l.uX)(),(0,l.Wv)((0,d.R1)(m.ArrowRight),{key:0})):((0,l.uX)(),(0,l.Wv)((0,d.R1)(m.ArrowLeft),{key:1}))])),_:1})],4)])}}};const yt=(0,r.A)(wt,[["__scopeId","data-v-5e14fbd2"]]);var bt=yt,kt=a(91859),_t=a(55369),At=a(84564),xt=a(75653);const Lt=e=>((0,l.Qi)("data-v-2b944de6"),e=e(),(0,l.jt)(),e),Ct=Lt((()=>(0,l.Lk)("div",{class:"title"},[(0,l.Lk)("h1",null,"卫星过境预测")],-1))),St={key:0,class:"selected_info",style:{"max-height":"25vh","max-width":"35vw",overflow:"hidden","margin-left":"1vw"}},Rt={style:{"font-size":"14px","background-color":"#2c3e50",width:"25vw"}},It=Lt((()=>(0,l.Lk)("h2",null,"（结果仅供参考）",-1))),Tt=Lt((()=>(0,l.Lk)("div",{id:"mouse-position",class:"mouse-position"},null,-1))),Dt=Lt((()=>(0,l.Lk)("div",{id:"infoBox",class:"ol-popup",style:{display:"none"}},[(0,l.Lk)("div",{id:"infoContent"})],-1))),Ot=Lt((()=>(0,l.Lk)("div",{id:"overviewMap",class:"overview-map"},null,-1)));var Ft={__name:"orbit_transit",setup(e){const t=(0,u.rd)(),a=new ie.A({source:new re.A}),o=(e,t)=>{let a;return function(...o){const l=self;a&&clearTimeout(a),a=setTimeout((()=>{e.apply(l,o)}),t)}},n=window.ResizeObserver;window.ResizeObserver=class extends n{constructor(e){e=o(e,20),super(e)}};const i=(0,d.KR)(null),r=(0,d.KR)(null),s=(0,d.Kh)({value:null}),c=(0,d.KR)(null),m=(0,d.KR)(!1),g=(0,d.KR)([]),v=((0,d.KR)(null),(0,d.Kh)(new re.A)),p=(0,l.EW)((()=>({marginLeft:m.value?"0":"26vw"}))),h=()=>{m.value=!m.value},f=(0,l.EW)((()=>({transition:"width 0.5s",marginTop:"35vh",marginLeft:"1vw",width:m.value?"0":"25vw",overflow:m.value?"hidden":"visible"}))),w=new se.Ay({fill:new ce.A({color:"rgba(255, 255, 255, 0.0)"}),stroke:new ue.A({color:"#3399CC",width:1})}),y=()=>{t.push({path:"/"})},b=new se.Ay({fill:new ce.A({color:"rgba(0, 0, 255, 0.6)"}),stroke:new ue.A({color:"#ffcc33",width:2})});let k=[],_=null;function A(e){const t=e.chinese_name+e.time_local;if(console.log(t),_===t)k.forEach((e=>{e.setStyle(w)})),k=[],_=null;else{k.forEach((e=>{e.setStyle(w)})),k=[];const e=v.getFeatures().filter((e=>e.get("id")===t));e.forEach((e=>{e.setStyle(b),k.push(e)})),_=t}}const x=()=>{const e=localStorage.getItem("storedGeometry");if(e){const t=new me.A,o=t.readFeature(e,{dataProjection:"EPSG:4326",featureProjection:s.value.getView().getProjection()});a.getSource().addFeature(o),s.value.addLayer(a)}};return(0,l.sV)((()=>{const e=localStorage.getItem("orbitData2"),t=localStorage.getItem("select_area");e&&t&&(i.value=JSON.parse(e),c.value=JSON.parse(t)),console.log(i.value);const a=()=>{i&&i.value&&Object.values(i.value).forEach((e=>{e.orbit.forEach((t=>{g.value.push({chinese_name:e.info.chinese_name,time_local:t.properties.time_local,orbit:t})}))}))};a();const o=new ge.A({layers:[new oe.A({source:new le.A({url:"https://t0.tianditu.gov.cn/DataServer?x={x}&y={y}&l={z}&T=vec_w&tk=9df1e2d38f43b8983357c36603d366e5",tileLoadFunction:function(e,t){let a=new Image;a.crossOrigin="",a.setAttribute("crossOrigin","anonymous"),a.onload=function(){let t=document.createElement("canvas"),o=a.width,l=a.height;t.width=o,t.height=l;let n=t.getContext("2d");n.filter="grayscale(98%) invert(100%) sepia(20%) hue-rotate(180deg) saturate(1600%) brightness(80%) contrast(90%)",n.drawImage(a,0,0,o,l,0,0,o,l),e.getImage().src=t.toDataURL("image/png")},a.src=t}})}),new oe.A({source:new le.A({url:"https://t0.tianditu.gov.cn/DataServer?x={x}&y={y}&l={z}&T=cva_w&tk=9df1e2d38f43b8983357c36603d366e5",tileLoadFunction:function(e,t){let a=new Image;a.crossOrigin="",a.setAttribute("crossOrigin","anonymous"),a.onload=function(){let t=document.createElement("canvas"),o=a.width,l=a.height;t.width=o,t.height=l;let n=t.getContext("2d");n.filter="grayscale(98%) invert(100%) sepia(20%) hue-rotate(180deg) saturate(1600%) brightness(80%) contrast(90%)",n.drawImage(a,0,0,o,l,0,0,o,l),e.getImage().src=t.toDataURL("image/png")},a.src=t}})})],collapseLabel:"»",label:"«",collapsed:!1,collapsible:!1,target:"overviewMap"});s.value=new te.A({target:r.value,layers:[new oe.A({source:new le.A({url:"https://t0.tianditu.gov.cn/DataServer?x={x}&y={y}&l={z}&T=vec_w&tk=9df1e2d38f43b8983357c36603d366e5",tileLoadFunction:function(e,t){let a=new Image;a.crossOrigin="",a.setAttribute("crossOrigin","anonymous"),a.onload=function(){let t=document.createElement("canvas"),o=a.width,l=a.height;t.width=o,t.height=l;let n=t.getContext("2d");n.filter="grayscale(98%) invert(100%) sepia(20%) hue-rotate(180deg) saturate(1600%) brightness(80%) contrast(90%)",n.drawImage(a,0,0,o,l,0,0,o,l),e.getImage().src=t.toDataURL("image/png")},a.src=t}})}),new oe.A({source:new le.A({url:"https://t0.tianditu.gov.cn/DataServer?x={x}&y={y}&l={z}&T=cva_w&tk=9df1e2d38f43b8983357c36603d366e5",tileLoadFunction:function(e,t){let a=new Image;a.crossOrigin="",a.setAttribute("crossOrigin","anonymous"),a.onload=function(){let t=document.createElement("canvas"),o=a.width,l=a.height;t.width=o,t.height=l;let n=t.getContext("2d");n.filter="grayscale(98%) invert(100%) sepia(20%) hue-rotate(180deg) saturate(1600%) brightness(80%) contrast(90%)",n.drawImage(a,0,0,o,l,0,0,o,l),e.getImage().src=t.toDataURL("image/png")},a.src=t}})})],view:new ae.Ay({center:[12923468.57,4865948.2],zoom:3,projection:"EPSG:3857"}),controls:(0,ve.N)().extend([new pe.A,new he.A,o,new fe.A])});const l=document.getElementById("mouse-position");function n(e){return Array.isArray(e)?1+Math.max(...e.map(n)):0}function u(e,t,a){const o=document.getElementById("infoContent");o.innerHTML=`<h3>${t}</h3><p>过境时间: ${a}</p>`,d.setPosition(e),document.getElementById("infoBox").style.display="block"}s.value.on("pointermove",(function(e){e.preventDefault();const t=s.value.getEventCoordinate(e.originalEvent),a=(0,de.WP)(t),o=a.map((function(e){return e.toFixed(6)})).join(", ");l.innerText=`Lon: ${o.split(", ")[0]}, Lat: ${o.split(", ")[1]}`})),g.value.forEach((e=>{if(console.log(e),4===n(e.orbit.geometry)){const t=e.orbit.geometry;console.log(t);const a=new _t.A(t),o=new kt.A({geometry:a,name:e.chinese_name,id:e.chinese_name+e.orbit.properties.time_local,data:e.orbit.properties.time_local});o.getGeometry(),v.addFeature(o)}else{const t=e.orbit.geometry;console.log(t);const a=new At.Ay(t),o=new kt.A({geometry:a,id:e.chinese_name+e.orbit.properties.time_local,name:e.chinese_name,data:e.orbit.properties.time_local});o.getGeometry(),v.addFeature(o)}const t=new ie.A({source:v,style:w});s.value.addLayer(t)})),s.value.on("click",(function(e){let t=!1;s.value.forEachFeatureAtPixel(e.pixel,(function(a){if(!t&&("Polygon"===a.getGeometry().getType()||"MultiPolygon"===a.getGeometry().getType())){const o=a.get("name"),l=a.get("data");u(e.coordinate,o,l),t=!0}})),t||d.setPosition(void 0)}));const d=new xt.A({element:document.getElementById("infoBox"),autoPan:!0,autoPanAnimation:{duration:250}});return x(),s.value.addOverlay(d),{handleRowClick:A,map:s}})),(e,t)=>{const a=(0,l.g2)("el-table-column"),o=(0,l.g2)("el-table"),n=(0,l.g2)("el-button"),s=(0,l.g2)("ArrowRight"),u=(0,l.g2)("ArrowLeft"),d=(0,l.g2)("el-icon");return(0,l.uX)(),(0,l.CE)("div",{ref_key:"mapContainer",ref:r,id:"map-container",class:"map-container"},[Ct,i.value&&c.value?((0,l.uX)(),(0,l.CE)("div",St,[(0,l.Lk)("div",Rt,[It,(0,l.Lk)("p",null,"时间："+(0,D.v_)(c.value.time_start.substring(0,10))+"至"+(0,D.v_)(c.value.time_end.substring(0,10)),1)])])):(0,l.Q3)("",!0),(0,l.Lk)("div",{class:"select_box",style:(0,D.Tr)(f.value)},[(0,l.bF)(o,{data:g.value,onRowClick:A,style:{"margin-bottom":"20px","max-height":"50vh",overflow:"auto"},"header-cell-style":{background:"#2c3e50",color:"white"},"column-cell-style":{background:"#2c3e50",color:"white"}},{default:(0,l.k6)((()=>[(0,l.bF)(a,{prop:"chinese_name",label:"卫星名"}),(0,l.bF)(a,{prop:"time_local",label:"过境时间"})])),_:1},8,["data"]),(0,l.bF)(n,{onClick:y,style:{width:"40%","background-color":"#2c3e50","margin-left":"40%"}},{default:(0,l.k6)((()=>[(0,l.eW)("返回")])),_:1})],4),Tt,(0,l.Lk)("div",{class:"collapse-arrow",onClick:h,style:(0,D.Tr)(p.value)},[(0,l.bF)(d,{size:"30px"},{default:(0,l.k6)((()=>[m.value?((0,l.uX)(),(0,l.Wv)(s,{key:0})):((0,l.uX)(),(0,l.Wv)(u,{key:1}))])),_:1})],4),Dt,Ot],512)}}};const Et=(0,r.A)(Ft,[["__scopeId","data-v-2b944de6"]]);var Wt=Et;const zt=[{path:"/",name:"Home",component:T},{path:"/data-select",name:"data_select",component:$e},{path:"/orbit_prediction",component:bt,meta:{requiresAuth:!0}},{path:"/orbit_transit",component:Wt,meta:{requiresAuth:!0}},{path:"/:catchAll(.*)",redirect:"/"}],Pt=(0,u.aE)({history:(0,u.Bt)(),routes:zt});var Kt=Pt,Mt=a(99973),Vt=(0,Mt.y$)({state:{},getters:{},mutations:{},actions:{},modules:{}}),Xt=a(86102),jt=(a(4188),a(2721));const Gt=(0,o.Ef)(c);for(const[Nt,Jt]of Object.entries(m))Gt.component(Nt,Jt);Gt.use(Vt),Gt.use(Kt),Gt.use(Xt.A,{locale:jt.A}),Gt.mount("#app"),window.addEventListener("beforeunload",(()=>{localStorage.clear()})),document.documentElement.classList.add("dark")}},t={};function a(o){var l=t[o];if(void 0!==l)return l.exports;var n=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}a.m=e,function(){var e=[];a.O=function(t,o,l,n){if(!o){var i=1/0;for(u=0;u<e.length;u++){o=e[u][0],l=e[u][1],n=e[u][2];for(var r=!0,s=0;s<o.length;s++)(!1&n||i>=n)&&Object.keys(a.O).every((function(e){return a.O[e](o[s])}))?o.splice(s--,1):(r=!1,n<i&&(i=n));if(r){e.splice(u--,1);var c=l();void 0!==c&&(t=c)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[o,l,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){a.p="/orbital-prediction-demo/"}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,o){var l,n,i=o[0],r=o[1],s=o[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(l in r)a.o(r,l)&&(a.m[l]=r[l]);if(s)var u=s(a)}for(t&&t(o);c<i.length;c++)n=i[c],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(u)},o=self["webpackChunkorbit_lasted"]=self["webpackChunkorbit_lasted"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=a.O(void 0,[504],(function(){return a(97934)}));o=a.O(o)})();
//# sourceMappingURL=app.868210a0.js.map